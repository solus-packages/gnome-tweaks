From f806087551f0de74911e8153e9b96468607741f9 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Mon, 17 Apr 2017 05:03:36 +0100
Subject: [PATCH 2/2] tweaks: Do not crash when GNOME Shell is not running

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 gtweak/tweaks/tweak_group_shell_extensions.py | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/gtweak/tweaks/tweak_group_shell_extensions.py b/gtweak/tweaks/tweak_group_shell_extensions.py
index 8ff6cd1..0d778cf 100644
--- a/gtweak/tweaks/tweak_group_shell_extensions.py
+++ b/gtweak/tweaks/tweak_group_shell_extensions.py
@@ -306,8 +306,9 @@ class ShellExtensionTweakGroup(ListBoxTweakGroup):
                                    *extension_tweaks)
         
         self.titlebar_widget = Gtk.Switch(visible=True)
-        shell._settings.bind("disable-user-extensions", self.titlebar_widget,
-                             "active", Gio.SettingsBindFlags.INVERT_BOOLEAN)
+        if shell is not None:
+            shell._settings.bind("disable-user-extensions", self.titlebar_widget,
+                                 "active", Gio.SettingsBindFlags.INVERT_BOOLEAN)
 
         self.set_header_func(self._list_header_func, None)
 
-- 
2.12.2

